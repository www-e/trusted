| schemaname | tablename | policyname                        | permissive | roles           | cmd    | qual                                                                                                                                         | with_check                                                                                             |
| ---------- | --------- | --------------------------------- | ---------- | --------------- | ------ | -------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------ |
| storage    | objects   | Admins can manage all photos      | PERMISSIVE | {authenticated} | ALL    | ((bucket_id = 'userphotos'::text) AND (EXISTS ( SELECT 1
   FROM users
  WHERE ((users.id = auth.uid()) AND (users.role = 'admin'::text))))) | null                                                                                                   |
| storage    | objects   | Admins can view all photos        | PERMISSIVE | {authenticated} | SELECT | ((bucket_id = 'userphotos'::text) AND (EXISTS ( SELECT 1
   FROM users
  WHERE ((users.id = auth.uid()) AND (users.role = 'admin'::text))))) | null                                                                                                   |
| storage    | objects   | Fallback upload policy            | PERMISSIVE | {authenticated} | INSERT | null                                                                                                                                         | (bucket_id = 'userphotos'::text)                                                                       |
| storage    | objects   | Users can delete their own photos | PERMISSIVE | {authenticated} | DELETE | ((bucket_id = 'userphotos'::text) AND ((storage.foldername(name))[1] = ('user_'::text || auth.uid())))                                       | null                                                                                                   |
| storage    | objects   | Users can update their own photos | PERMISSIVE | {authenticated} | UPDATE | ((bucket_id = 'userphotos'::text) AND ((storage.foldername(name))[1] = ('user_'::text || auth.uid())))                                       | null                                                                                                   |
| storage    | objects   | Users can upload to their folder  | PERMISSIVE | {authenticated} | INSERT | null                                                                                                                                         | ((bucket_id = 'userphotos'::text) AND ((storage.foldername(name))[1] = ('user_'::text || auth.uid()))) |
| storage    | objects   | Users can view their own photos   | PERMISSIVE | {authenticated} | SELECT | ((bucket_id = 'userphotos'::text) AND ((storage.foldername(name))[1] = ('user_'::text || auth.uid())))                                       | null                                                                                                   |